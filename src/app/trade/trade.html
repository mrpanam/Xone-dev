<div class="container mt-4">
    <h2>Trades</h2>
    
    <!-- Loading State -->
    @if (tradeService.tradesLoading) {
      <div>Loading trades...</div>
    }
  
    <!-- Error State -->
    @if (tradeService.tradesError) {
      <div class="error">{{ tradeService.tradesError }}</div>
    }
  
    <!-- Trades Table -->
    <table class="table">
      <thead>
        <tr>
          <th>Symbol</th>
          <th>Category</th>
          <th>Qty</th>
          <th>Bought</th>
          <th>Current</th>
          <th>P/L</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody>
        @for (trade of tradeService.trades; track trade.id) {
          <tr>
            <td>{{ trade.symbol }}</td>
            <td>{{ trade.categoryName || trade.category.id.String }}</td>
            <td>{{ trade.quantity | number:'1.2-2' }}</td>
            <td>{{ trade.bought_price | currency:'USD' }}</td>
            <td>{{ trade.current_price | currency:'USD' }}</td>
            <td [class]="getProfitLossClass(trade)">
              {{ getProfitLoss(trade) | currency:'USD' }}
            </td>
            <td>{{ trade.status }}</td>
          </tr>
        } @empty {
          <tr>
            <td colspan="7">No trades found</td>
          </tr>
        }
      </tbody>
    </table>
  
    <!-- Refresh Button -->
    <button (click)="refreshTrades()" [disabled]="tradeService.tradesLoading">
      Refresh
    </button>
  </div>